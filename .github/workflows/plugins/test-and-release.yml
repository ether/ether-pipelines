on:
  workflow_call:
    secrets:
      NPM_TOKEN:
        required: true


jobs:
  backend:
    uses: ./.github/workflows/plugins/backend-tests.yml
    secrets: inherit
  frontend:
    uses: ./.github/workflows/plugins/frontend-tests.yml
    secrets: inherit
  release:
    if: ${{ github.ref == 'refs/heads/master' || github.ref == 'refs/heads/main' }}
    needs:
      - backend
      - frontend
    uses: ./.github/workflows/plugins/npmpublish.yml
    secrets: inherit
